<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><link rel="stylesheet" type="text/css" href="isabelle.css"/>
<title>Theory Termination</title>
</head>


<body>
<div class="head">
<h1>Theory Termination</h1>
</div>

<pre class="source"><span class="keyword1"><span class="command"><span>theory</span></span></span><span> </span><a href="Termination.html"><span>Termination</span></a><span>
  </span><span class="keyword2"><span class="keyword"><span>imports</span></span></span><span> </span><a href="../../HOL/HOL/Main.html"><span>Main</span></a><span> </span><span class="quoted"><span>"</span><a href="../../HOL/HOL-Statespace/StateSpaceSyntax.html"><span>HOL-Statespace.StateSpaceSyntax</span></a><span>"</span></span><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>section</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>"</span><span>Specification of the algorithm</span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Termination.vars.axioms|fact"><span class="entity_def" id="Termination.vars.intro|fact"><span class="entity_def" id="Termination.vars_def|fact"><span class="entity_def" id="Termination.vars_valuetypes.axioms|fact"><span class="entity_def" id="Termination.vars_valuetypes.intro|fact"><span class="entity_def" id="Termination.vars_valuetypes_def|fact"><span class="entity_def" id="Termination.vars_namespace.distinct_names|fact"><span class="entity_def" id="Termination.vars_namespace.intro|fact"><span class="entity_def" id="Termination.vars_namespace_def|fact"><span class="entity_def" id="Termination.vars|locale"><span class="entity_def" id="Termination.vars_valuetypes|locale"><span class="entity_def" id="Termination.vars_namespace|locale"><span class="entity_def" id="Termination.vars.axioms(2)|thm"><span class="entity_def" id="Termination.vars.axioms(1)|thm"><span class="entity_def" id="Termination.vars.intro|thm"><span class="entity_def" id="Termination.vars_def|thm"><span class="entity_def" id="Termination.vars_valuetypes.axioms(3)|thm"><span class="entity_def" id="Termination.vars_valuetypes.axioms(2)|thm"><span class="entity_def" id="Termination.vars_valuetypes.axioms(1)|thm"><span class="entity_def" id="Termination.vars_valuetypes.intro|thm"><span class="entity_def" id="Termination.vars_valuetypes_def|thm"><span class="entity_def" id="Termination.vars_namespace.distinct_names|thm"><span class="entity_def" id="Termination.vars_namespace.intro|thm"><span class="entity_def" id="Termination.vars_namespace_def|thm"><span class="entity_def" id="Termination.vars_def|axiom"><span class="entity_def" id="Termination.vars_valuetypes_def|axiom"><span class="entity_def" id="Termination.vars_namespace_def|axiom"><span class="entity_def" id="Termination.vars|const"><span class="entity_def" id="Termination.vars_valuetypes|const"><span class="entity_def" id="Termination.vars_namespace|const"><span>statespace</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="tfree"><span>'p</span></span><span> vars </span><span class="main"><span>=</span></span><span> 
  s </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'p</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'p</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span>"</span></span></span><span>
  S </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'p</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'p</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span>"</span></span></span><span>
  r </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'p</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'p</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span>"</span></span></span><span>
  R </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'p</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'p</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span>"</span></span></span><span>
  visited </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'p</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.bool|type"><span>bool</span></a><span>"</span></span></span><span>
  terminated </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.bool|type"><span>bool</span></a></span><span>

</span><span class="keyword1"><span class="command"><span>context</span></span></span><span> </span><a class="entity_ref" href="Termination.html#Termination.vars|locale"><span>vars</span></a><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Termination.vars.pending_def|fact"><span class="entity_def" id="Termination.vars.pending_def|thm"><span class="entity_def" id="Termination.vars.pending_def_raw|axiom"><span class="entity_def" id="offset_299..309">definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Termination.vars.pending.cong|fact"><span class="entity_def" id="Termination.vars.pending.cong|thm"><span class="entity_def" id="Termination.vars.pending|const"><span class="entity_def" id="offset_310..317">pending</span></span></span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="comment1"><span>― ‹</span><span>Number of messages in flight from p to q</span><span>›</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>pending</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>c</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>p</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>q</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>c</span></span></span></span><span class="main"><span>⋅</span></span><span>s</span><span class="main"><span>)</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>p</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>q</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>c</span></span></span></span><span class="main"><span>⋅</span></span><span>r</span><span class="main"><span>)</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>q</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>p</span></span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Termination.vars.receive_step_def|fact"><span class="entity_def" id="Termination.vars.receive_step_def|thm"><span class="entity_def" id="Termination.vars.receive_step_def_raw|axiom"><span class="entity_def" id="offset_418..428">definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Termination.vars.receive_step.cong|fact"><span class="entity_def" id="Termination.vars.receive_step.cong|thm"><span class="entity_def" id="Termination.vars.receive_step|const"><span class="entity_def" id="offset_429..441">receive_step</span></span></span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="comment1"><span>― ‹</span><span>Process p receives a message from q and sends a few more messages in response.</span><span>›</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>receive_step</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>c</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>c'</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>p</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span> </span><span class="bound"><span>q</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span>
    </span><span class="free"><span class="bound"><span class="entity"><span>p</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="bound"><span>q</span></span><span> 
    </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="Termination.html#offset_310..317"><span>pending</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>c</span></span></span></span><span> </span><span class="bound"><span>q</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>p</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater|const"><span>&gt;</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>
    </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span> </span><span class="bound"><span>P</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><span class="comment1"><span>― ‹</span><span>We pick a set P of processes to send messages to.</span><span>›</span></span><span>
        </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span> </span><span class="bound"><span>s_p'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><span class="bound"><span>s_p'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span> </span><span class="bound"><span>q</span></span><span> </span><span class="main"><span>.</span></span><span>
            </span><span class="keyword1"><span>let</span></span><span> </span><span class="bound"><span>s_p_q</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>c</span></span></span></span><span class="main"><span>⋅</span></span><span>s</span><span class="main"><span>)</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>p</span></span></span></span><span> </span><span class="bound"><span>q</span></span><span class="main"><span>)</span></span><span>
            </span><span class="keyword1"><span>in</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="bound"><span>q</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="bound"><span>P</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="bound"><span>s_p_q</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><span class="bound"><span>s_p_q</span></span><span class="main"><span>)</span></span><span>
    </span><span class="comment1"><span>― ‹</span><span>The new state:</span><span>›</span></span><span>
        </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>c'</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>c</span></span></span></span><span class="main"><span>&lt;</span></span><span>s </span><span class="main"><span>:=</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>c</span></span></span></span><span class="main"><span>⋅</span></span><span>s</span><span class="main"><span>)</span></span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>p</span></span></span></span><span class="main"><span>:=</span></span><span class="bound"><span>s_p'</span></span><span class="main"><span>)</span></span><span class="main"><span>,</span></span><span> r </span><span class="main"><span>:=</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>c</span></span></span></span><span class="main"><span>⋅</span></span><span>r</span><span class="main"><span>)</span></span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>p</span></span></span></span><span class="main"><span>:=</span></span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>c</span></span></span></span><span class="main"><span>⋅</span></span><span>r</span><span class="main"><span>)</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>p</span></span></span></span><span class="main"><span>)</span></span><span class="main"><span>(</span></span><span class="bound"><span>q</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>c</span></span></span></span><span class="main"><span>⋅</span></span><span>r</span><span class="main"><span>)</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>p</span></span></span></span><span> </span><span class="bound"><span>q</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>&gt;</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Termination.vars.daemon_step_def|fact"><span class="entity_def" id="Termination.vars.daemon_step_def|thm"><span class="entity_def" id="Termination.vars.daemon_step_def_raw|axiom"><span class="entity_def" id="offset_894..904">definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Termination.vars.daemon_step.cong|fact"><span class="entity_def" id="Termination.vars.daemon_step.cong|thm"><span class="entity_def" id="Termination.vars.daemon_step|const"><span class="entity_def" id="offset_905..916">daemon_step</span></span></span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>daemon_step</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>c</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>c'</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>p</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>c</span></span></span></span><span class="main"><span>⋅</span></span><span>terminated </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="main"><span>(</span></span><span>
    </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span> </span><span class="bound"><span>p</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>c</span></span></span></span><span class="main"><span>⋅</span></span><span>visited</span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>p</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.disj|const"><span>∨</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span> </span><span class="bound"><span>p</span></span><span> </span><span class="bound"><span>q</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>c</span></span></span></span><span class="main"><span>⋅</span></span><span>S</span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>p</span></span><span> </span><span class="bound"><span>q</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>c</span></span></span></span><span class="main"><span>⋅</span></span><span>R</span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>q</span></span><span> </span><span class="bound"><span>p</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>c'</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>c</span></span></span></span><span class="main"><span>&lt;</span></span><span>
      visited </span><span class="main"><span>:=</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span> </span><span class="bound"><span>q</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>c</span></span></span></span><span class="main"><span>⋅</span></span><span>visited</span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>q</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.disj|const"><span>∨</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>p</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="bound"><span>q</span></span><span class="main"><span>)</span></span><span class="main"><span>,</span></span><span>
      S </span><span class="main"><span>:=</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>c</span></span></span></span><span class="main"><span>⋅</span></span><span>S</span><span class="main"><span>)</span></span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>p</span></span></span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>c</span></span></span></span><span class="main"><span>⋅</span></span><span>s</span><span class="main"><span>)</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>p</span></span></span></span><span class="main"><span>)</span></span><span class="main"><span>,</span></span><span>
      R </span><span class="main"><span>:=</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>c</span></span></span></span><span class="main"><span>⋅</span></span><span>R</span><span class="main"><span>)</span></span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>p</span></span></span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>c</span></span></span></span><span class="main"><span>⋅</span></span><span>r</span><span class="main"><span>)</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>p</span></span></span></span><span class="main"><span>)</span></span><span class="main"><span>&gt;</span></span><span>
    </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>c'</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>c</span></span></span></span><span class="main"><span>&lt;</span></span><span>terminated </span><span class="main"><span>:=</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.True|const"><span>True</span></a><span class="main"><span>&gt;</span></span><span> </span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Termination.vars.step_def|fact"><span class="entity_def" id="Termination.vars.step_def|thm"><span class="entity_def" id="Termination.vars.step_def_raw|axiom"><span class="entity_def" id="offset_1200..1210">definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Termination.vars.step.cong|fact"><span class="entity_def" id="Termination.vars.step.cong|thm"><span class="entity_def" id="Termination.vars.step|const"><span class="entity_def" id="offset_1211..1215">step</span></span></span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>step</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>c</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>c'</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span> </span><span class="bound"><span>p</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="Termination.html#offset_429..441"><span>receive_step</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>c</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>c'</span></span></span></span><span> </span><span class="bound"><span>p</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.disj|const"><span>∨</span></a></span><span> </span><a class="entity_ref" href="Termination.html#offset_905..916"><span>daemon_step</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>c</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>c'</span></span></span></span><span> </span><span class="bound"><span>p</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Termination.vars.init_def|fact"><span class="entity_def" id="Termination.vars.init_def|thm"><span class="entity_def" id="Termination.vars.init_def_raw|axiom"><span class="entity_def" id="offset_1286..1296">definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Termination.vars.init.cong|fact"><span class="entity_def" id="Termination.vars.init.cong|thm"><span class="entity_def" id="Termination.vars.init|const"><span class="entity_def" id="offset_1297..1301">init</span></span></span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>init</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>c</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>∀</span></a></span><span> </span><span class="bound"><span>p</span></span><span> </span><span class="bound"><span>q</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>.</span></a></span><span>
    </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>c</span></span></span></span><span class="main"><span>⋅</span></span><span>s</span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>p</span></span><span> </span><span class="bound"><span>q</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater_eq|const"><span>≥</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>
    </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>c</span></span></span></span><span class="main"><span>⋅</span></span><span>S</span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>p</span></span><span> </span><span class="bound"><span>q</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>
    </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>c</span></span></span></span><span class="main"><span>⋅</span></span><span>r</span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>p</span></span><span> </span><span class="bound"><span>q</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>
    </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>c</span></span></span></span><span class="main"><span>⋅</span></span><span>R</span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>p</span></span><span> </span><span class="bound"><span>q</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>
    </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>c</span></span></span></span><span class="main"><span>⋅</span></span><span>visited</span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>p</span></span><span>
    </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>c</span></span></span></span><span class="main"><span>⋅</span></span><span>terminated</span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>section</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>"</span><span>Correctness proof</span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Termination.vars.inv1_def|fact"><span class="entity_def" id="Termination.vars.inv1_def|thm"><span class="entity_def" id="Termination.vars.inv1_def_raw|axiom"><span class="entity_def" id="offset_1482..1492">definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Termination.vars.inv1.cong|fact"><span class="entity_def" id="Termination.vars.inv1.cong|thm"><span class="entity_def" id="Termination.vars.inv1|const"><span class="entity_def" id="offset_1493..1497">inv1</span></span></span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="comment1"><span>― ‹</span><span>A process can only receive what has been sent.</span><span>›</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>inv1</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>c</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>∀</span></a></span><span> </span><span class="bound"><span>p</span></span><span> </span><span class="bound"><span>q</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>.</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>c</span></span></span></span><span class="main"><span>⋅</span></span><span>r</span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>p</span></span><span> </span><span class="bound"><span>q</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>c</span></span></span></span><span class="main"><span>⋅</span></span><span>s</span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>q</span></span><span> </span><span class="bound"><span>p</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_1601..1606">lemma</span></span></span><span> </span><span class="entity_def" id="Termination.vars.inv1_init|fact"><span class="entity_def" id="Termination.vars.inv1_init|thm"><span>inv1_init</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Termination.html#offset_1297..1301"><span>init</span></a><span> </span><span class="free"><span>c</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Termination.html#offset_1493..1497"><span>inv1</span></a><span> </span><span class="free"><span>c</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Termination.html#offset_1601..1606"><span>assms</span></a><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Termination.html#offset_1286..1296"><span>init_def</span></a><span> </span><a class="entity_ref" href="Termination.html#offset_1482..1492"><span>inv1_def</span></a><span> 
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_1710..1715">lemma</span></span></span><span> </span><span class="entity_def" id="Termination.vars.inv1_step|fact"><span class="entity_def" id="Termination.vars.inv1_step|thm"><span>inv1_step</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Termination.html#offset_1211..1215"><span>step</span></a><span> </span><span class="free"><span>c</span></span><span> </span><span class="free"><span>c'</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Termination.html#offset_1493..1497"><span>inv1</span></a><span> </span><span class="free"><span>c</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Termination.html#offset_1493..1497"><span>inv1</span></a><span> </span><span class="free"><span>c'</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_1790..1794">have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Termination.html#offset_1493..1497"><span>inv1</span></a><span> </span><span class="free"><span>c'</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Termination.html#offset_429..441"><span>receive_step</span></a><span> </span><span class="free"><span>c</span></span><span> </span><span class="free"><span>c'</span></span><span> </span><span class="skolem"><span>p</span></span><span> </span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Termination.html#offset_1493..1497"><span>inv1</span></a><span> </span><span class="free"><span>c</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>p</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Termination.html#offset_1790..1794"><span>that</span></a><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Termination.html#offset_418..428"><span>receive_step_def</span></a><span> </span><a class="entity_ref" href="Termination.html#offset_299..309"><span>pending_def</span></a><span> </span><a class="entity_ref" href="Termination.html#offset_1482..1492"><span>inv1_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/SMT/smt_systems.ML.html#SMT.smt|method"><span class="operator"><span>smt</span></span></a><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>,</span></span></span><span> best</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.trans_le_add1|fact"><span>trans_le_add1</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> 
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_1974..1978">have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Termination.html#offset_1493..1497"><span>inv1</span></a><span> </span><span class="free"><span>c'</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Termination.html#offset_905..916"><span>daemon_step</span></a><span> </span><span class="free"><span>c</span></span><span> </span><span class="free"><span>c'</span></span><span> </span><span class="skolem"><span>p</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Termination.html#offset_1493..1497"><span>inv1</span></a><span> </span><span class="free"><span>c</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>p</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Termination.html#offset_1974..1978"><span>that</span></a><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Termination.html#offset_894..904"><span>daemon_step_def</span></a><span> </span><a class="entity_ref" href="Termination.html#offset_1482..1492"><span>inv1_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>split</span></span><span class="main"><span class="main"><span>:</span></span></span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.if_splits|fact"><span>if_splits</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Termination.html#offset_1710..1715"><span>assms</span></a><span> </span><a class="entity_ref" href="Termination.html#offset_1200..1210"><span>step_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Termination.vars.consistent_def|fact"><span class="entity_def" id="Termination.vars.consistent_def|thm"><span class="entity_def" id="Termination.vars.consistent_def_raw|axiom"><span class="entity_def" id="offset_2177..2187">definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Termination.vars.consistent.cong|fact"><span class="entity_def" id="Termination.vars.consistent.cong|thm"><span class="entity_def" id="Termination.vars.consistent|const"><span class="entity_def" id="offset_2188..2198">consistent</span></span></span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>consistent</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>c</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>Q</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="main"><span>∀</span></span><span> </span><span class="bound"><span>p</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>Q</span></span></span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>c</span></span></span></span><span class="main"><span>⋅</span></span><span>visited</span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>p</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>∀</span></span><span> </span><span class="bound"><span>q</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>Q</span></span></span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>c</span></span></span></span><span class="main"><span>⋅</span></span><span>S</span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>p</span></span><span> </span><span class="bound"><span>q</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>c</span></span></span></span><span class="main"><span>⋅</span></span><span>R</span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>q</span></span><span> </span><span class="bound"><span>p</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Termination.vars.inv2_def|fact"><span class="entity_def" id="Termination.vars.inv2_def|thm"><span class="entity_def" id="Termination.vars.inv2_def_raw|axiom"><span class="entity_def" id="offset_2287..2297">definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Termination.vars.inv2.cong|fact"><span class="entity_def" id="Termination.vars.inv2.cong|thm"><span class="entity_def" id="Termination.vars.inv2|const"><span class="entity_def" id="offset_2298..2302">inv2</span></span></span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>inv2</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>c</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>∀</span></a></span><span> </span><span class="bound"><span>Q</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="Termination.html#offset_2188..2198"><span>consistent</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>c</span></span></span></span><span> </span><span class="bound"><span>Q</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>∃</span></span><span> </span><span class="bound"><span>p</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><span class="bound"><span>Q</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span> </span><span class="bound"><span>q</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>c</span></span></span></span><span class="main"><span>⋅</span></span><span>R</span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>p</span></span><span> </span><span class="bound"><span>q</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>c</span></span></span></span><span class="main"><span>⋅</span></span><span>r</span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>p</span></span><span> </span><span class="bound"><span>q</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.disj|const"><span>∨</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>c</span></span></span></span><span class="main"><span>⋅</span></span><span>S</span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>p</span></span><span> </span><span class="bound"><span>q</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>c</span></span></span></span><span class="main"><span>⋅</span></span><span>s</span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>p</span></span><span> </span><span class="bound"><span>q</span></span><span class="main"><span>)</span></span><span>
    </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>⟶</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>∃</span></span><span> </span><span class="bound"><span>p</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><span class="bound"><span>Q</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>∃</span></span><span> </span><span class="bound"><span>q</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.uminus_class.uminus|const"><span>-</span></a></span><span class="bound"><span>Q</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>c</span></span></span></span><span class="main"><span>⋅</span></span><span>r</span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>p</span></span><span> </span><span class="bound"><span>q</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater|const"><span>&gt;</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>c</span></span></span></span><span class="main"><span>⋅</span></span><span>R</span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>p</span></span><span> </span><span class="bound"><span>q</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_2461..2466">lemma</span></span></span><span> </span><span class="entity_def" id="Termination.vars.inv2_init|fact"><span class="entity_def" id="Termination.vars.inv2_init|thm"><span>inv2_init</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Termination.html#offset_1297..1301"><span>init</span></a><span> </span><span class="free"><span>c</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Termination.html#offset_2298..2302"><span>inv2</span></a><span> </span><span class="free"><span>c</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Termination.html#offset_2461..2466"><span>assms</span></a><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Termination.html#offset_1286..1296"><span>init_def</span></a><span> </span><a class="entity_ref" href="Termination.html#offset_2287..2297"><span>inv2_def</span></a><span> </span><a class="entity_ref" href="Termination.html#offset_2177..2187"><span>consistent_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_2584..2589">lemma</span></span></span><span> </span><span class="entity_def" id="Termination.vars.inv2_step|fact"><span class="entity_def" id="Termination.vars.inv2_step|thm"><span>inv2_step</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Termination.html#offset_1211..1215"><span>step</span></a><span> </span><span class="free"><span>c</span></span><span> </span><span class="free"><span>c'</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Termination.html#offset_1493..1497"><span>inv1</span></a><span> </span><span class="free"><span>c</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Termination.html#offset_1493..1497"><span>inv1</span></a><span> </span><span class="free"><span>c'</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Termination.html#offset_2298..2302"><span>inv2</span></a><span> </span><span class="free"><span>c</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Termination.html#offset_2298..2302"><span>inv2</span></a><span> </span><span class="free"><span>c'</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword3"><span class="command"><span class="entity_def" id="offset_2691..2697">define</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>stale</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>stale</span></span><span> </span><span class="skolem"><span>c</span></span><span> </span><span class="skolem"><span>Q</span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="main"><span>∃</span></span><span> </span><span class="bound"><span>p</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><span class="skolem"><span>Q</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span> </span><span class="bound"><span>q</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>c</span></span><span class="main"><span>⋅</span></span><span>R</span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>p</span></span><span> </span><span class="bound"><span>q</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>c</span></span><span class="main"><span>⋅</span></span><span>r</span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>p</span></span><span> </span><span class="bound"><span>q</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.disj|const"><span>∨</span></a></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>c</span></span><span class="main"><span>⋅</span></span><span>S</span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>p</span></span><span> </span><span class="bound"><span>q</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>c</span></span><span class="main"><span>⋅</span></span><span>s</span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>p</span></span><span> </span><span class="bound"><span>q</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>c</span></span><span> </span><span class="skolem"><span>Q</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Termination.html#offset_2298..2302"><span>inv2</span></a><span> </span><span class="free"><span>c'</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Termination.html#offset_429..441"><span>receive_step</span></a><span> </span><span class="free"><span>c</span></span><span> </span><span class="free"><span>c'</span></span><span> </span><span class="skolem"><span>p</span></span><span> </span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>p</span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
    </span><span class="keyword1"><span class="command"><span>{</span></span></span><span> </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>Q</span></span><span>
      </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Termination.html#offset_2188..2198"><span>consistent</span></a><span> </span><span class="free"><span>c'</span></span><span> </span><span class="skolem"><span>Q</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>stale</span></span><span> </span><span class="free"><span>c'</span></span><span> </span><span class="skolem"><span>Q</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∃</span></span><span> </span><span class="bound"><span>p</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><span class="skolem"><span>Q</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>∃</span></span><span> </span><span class="bound"><span>q</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.uminus_class.uminus|const"><span>-</span></a></span><span class="skolem"><span>Q</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>c'</span></span><span class="main"><span>⋅</span></span><span>r</span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>p</span></span><span> </span><span class="bound"><span>q</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater|const"><span>&gt;</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>c'</span></span><span class="main"><span>⋅</span></span><span>R</span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>p</span></span><span> </span><span class="bound"><span>q</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
        </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Termination.html#offset_2188..2198"><span>consistent</span></a><span> </span><span class="free"><span>c</span></span><span> </span><span class="skolem"><span>Q</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Termination.html#offset_2188..2198"><span>consistent</span></a><span> </span><span class="free"><span>c'</span></span><span> </span><span class="skolem"><span>Q</span></span><span>›</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Termination.html#offset_429..441"><span>receive_step</span></a><span> </span><span class="free"><span>c</span></span><span> </span><span class="free"><span>c'</span></span><span> </span><span class="skolem"><span>p</span></span><span>›</span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Termination.html#offset_2177..2187"><span>consistent_def</span></a><span> </span><a class="entity_ref" href="Termination.html#offset_418..428"><span>receive_step_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
        </span><span class="keyword1"><span class="command"><span>{</span></span></span><span> </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>stale</span></span><span> </span><span class="free"><span>c</span></span><span> </span><span class="skolem"><span>Q</span></span><span>"</span></span></span><span>
            </span><span class="comment1"><span>― ‹</span><span>If Q is stale in </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span class="free"><span>c</span></span></span><span class="antiquote"><span>}</span></span></span><span>, then already in </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span class="free"><span>c</span></span></span><span class="antiquote"><span>}</span></span></span><span> there is a process that 
</span><span>has received a message from outside Q that the daemon has not seen. This remains true.</span><span>›</span></span><span> 
          </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∃</span></span><span> </span><span class="bound"><span>p</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><span class="skolem"><span>Q</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>∃</span></span><span> </span><span class="bound"><span>q</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.uminus_class.uminus|const"><span>-</span></a></span><span class="skolem"><span>Q</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>c</span></span><span class="main"><span>⋅</span></span><span>r</span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>p</span></span><span> </span><span class="bound"><span>q</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater|const"><span>&gt;</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>c</span></span><span class="main"><span>⋅</span></span><span>R</span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>p</span></span><span> </span><span class="bound"><span>q</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Termination.html#offset_2298..2302"><span>inv2</span></a><span> </span><span class="free"><span>c</span></span><span>›</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Termination.html#offset_2188..2198"><span>consistent</span></a><span> </span><span class="free"><span>c</span></span><span> </span><span class="skolem"><span>Q</span></span><span>›</span></span></span><span> </span><a class="entity_ref" href="Termination.html#offset_2287..2297"><span>inv2_def</span></a><span> </span><a class="entity_ref" href="Termination.html#offset_2691..2697"><span>stale_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
          </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Termination.html#offset_429..441"><span>receive_step</span></a><span> </span><span class="free"><span>c</span></span><span> </span><span class="free"><span>c'</span></span><span> </span><span class="skolem"><span>p</span></span><span>›</span></span></span><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Termination.html#offset_418..428"><span>receive_step_def</span></a><span>
            </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
            </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>mono_tags</span><span class="main"><span class="main"><span>,</span></span></span><span> opaque_lifting</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.ComplI|fact"><span>ComplI</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.less_Suc_eq|fact"><span>less_Suc_eq</span></a><span class="main"><span>)</span></span><span>
            </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>}</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>{</span></span></span><span> </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>stale</span></span><span> </span><span class="free"><span>c</span></span><span> </span><span class="skolem"><span>Q</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
            </span><span class="comment1"><span>― ‹</span><span>If Q is not stale in </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span class="free"><span>c</span></span></span><span class="antiquote"><span>}</span></span></span><span>, then no process in Q can receive a message from another process in Q (because all counts match).
</span><span>So, because we assume that the count of at least one process in Q changes, it must be by receiving a message from outside Q.</span><span>›</span></span><span>
          </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>q</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>p</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="skolem"><span>Q</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>c'</span></span><span class="main"><span>⋅</span></span><span>r</span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>p</span></span><span> </span><span class="skolem"><span>q</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>c</span></span><span class="main"><span>⋅</span></span><span>r</span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>p</span></span><span> </span><span class="skolem"><span>q</span></span><span>"</span></span></span><span>
            </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="skolem"><span>stale</span></span><span> </span><span class="free"><span>c'</span></span><span> </span><span class="skolem"><span>Q</span></span><span>›</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Termination.html#offset_429..441"><span>receive_step</span></a><span> </span><span class="free"><span>c</span></span><span> </span><span class="free"><span>c'</span></span><span> </span><span class="skolem"><span>p</span></span><span>›</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>stale</span></span><span> </span><span class="free"><span>c</span></span><span> </span><span class="skolem"><span>Q</span></span><span class="main"><span>)</span></span><span>›</span></span></span><span> 
            </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Termination.html#offset_418..428"><span>receive_step_def</span></a><span> </span><a class="entity_ref" href="Termination.html#offset_2691..2697"><span>stale_def</span></a><span> </span><a class="entity_ref" href="Termination.html#offset_299..309"><span>pending_def</span></a><span> 
            </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
             </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/SMT/smt_systems.ML.html#SMT.smt|method"><span class="operator"><span>smt</span></span></a><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>,</span></span></span><span> best</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.n_not_Suc_n|fact"><span>n_not_Suc_n</span></a><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>
            </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>q</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><span class="skolem"><span>Q</span></span><span>"</span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
            </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∀</span></span><span> </span><span class="bound"><span>p</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><span class="skolem"><span>Q</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>∀</span></span><span> </span><span class="bound"><span>q</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><span class="skolem"><span>Q</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>c</span></span><span class="main"><span>⋅</span></span><span>r</span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>p</span></span><span> </span><span class="bound"><span>q</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>c'</span></span><span class="main"><span>⋅</span></span><span>r</span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>p</span></span><span> </span><span class="bound"><span>q</span></span><span>"</span></span></span><span>
            </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
              </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>stale</span></span><span> </span><span class="free"><span>c</span></span><span> </span><span class="skolem"><span>Q</span></span><span class="main"><span>)</span></span><span>›</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∀</span></span><span> </span><span class="bound"><span>p</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><span class="skolem"><span>Q</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>∀</span></span><span> </span><span class="bound"><span>q</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><span class="skolem"><span>Q</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>c</span></span><span class="main"><span>⋅</span></span><span>s</span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>p</span></span><span> </span><span class="bound"><span>q</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>c</span></span><span class="main"><span>⋅</span></span><span>r</span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>q</span></span><span> </span><span class="bound"><span>p</span></span><span>"</span></span></span><span>
                </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Termination.html#offset_2188..2198"><span>consistent</span></a><span> </span><span class="free"><span>c</span></span><span> </span><span class="skolem"><span>Q</span></span><span>›</span></span></span><span> </span><a class="entity_ref" href="Termination.html#offset_2177..2187"><span>consistent_def</span></a><span> </span><a class="entity_ref" href="Termination.html#offset_2691..2697"><span>stale_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.force|method"><span class="operator"><span>force</span></span></a><span>
              </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
                </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Termination.html#offset_429..441"><span>receive_step</span></a><span> </span><span class="free"><span>c</span></span><span> </span><span class="free"><span>c'</span></span><span> </span><span class="skolem"><span>p</span></span><span>›</span></span></span><span> </span><a class="entity_ref" href="Termination.html#offset_299..309"><span>pending_def</span></a><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Termination.html#offset_418..428"><span>receive_step_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
            </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
            </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
              </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>(</span></span><span class="free"><span>c'</span></span><span class="main"><span>⋅</span></span><span>r</span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>p</span></span><span> </span><span class="skolem"><span>q</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>c</span></span><span class="main"><span>⋅</span></span><span>r</span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>p</span></span><span> </span><span class="skolem"><span>q</span></span><span>›</span></span></span><span>  </span><span class="quoted"><span class="quoted"><span>‹</span><span class="skolem"><span>p</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="skolem"><span>Q</span></span><span>›</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
          </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>c'</span></span><span class="main"><span>⋅</span></span><span>r</span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>p</span></span><span> </span><span class="skolem"><span>q</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater|const"><span>&gt;</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>c</span></span><span class="main"><span>⋅</span></span><span>r</span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>p</span></span><span> </span><span class="skolem"><span>q</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span>  </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>(</span></span><span class="free"><span>c'</span></span><span class="main"><span>⋅</span></span><span>r</span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>p</span></span><span> </span><span class="skolem"><span>q</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>c</span></span><span class="main"><span>⋅</span></span><span>r</span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>p</span></span><span> </span><span class="skolem"><span>q</span></span><span>›</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Termination.html#offset_429..441"><span>receive_step</span></a><span> </span><span class="free"><span>c</span></span><span> </span><span class="free"><span>c'</span></span><span> </span><span class="skolem"><span>p</span></span><span>›</span></span></span><span>
            </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Termination.html#offset_418..428"><span>receive_step_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>split</span></span><span class="main"><span class="main"><span>:</span></span></span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.if_splits|fact"><span>if_splits</span></a><span class="main"><span>)</span></span><span>
          </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>c'</span></span><span class="main"><span>⋅</span></span><span>R</span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>p</span></span><span> </span><span class="skolem"><span>q</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>c</span></span><span class="main"><span>⋅</span></span><span>r</span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>p</span></span><span> </span><span class="skolem"><span>q</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Termination.html#offset_429..441"><span>receive_step</span></a><span> </span><span class="free"><span>c</span></span><span> </span><span class="free"><span>c'</span></span><span> </span><span class="skolem"><span>p</span></span><span>›</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>stale</span></span><span> </span><span class="free"><span>c</span></span><span> </span><span class="skolem"><span>Q</span></span><span class="main"><span>)</span></span><span>›</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="skolem"><span>p</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="skolem"><span>Q</span></span><span>›</span></span></span><span>
            </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Termination.html#offset_418..428"><span>receive_step_def</span></a><span> </span><a class="entity_ref" href="Termination.html#offset_2691..2697"><span>stale_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
          </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.force|method"><span class="operator"><span>force</span></span></a><span> </span><span class="keyword1"><span class="command"><span>}</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
      </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><span class="keyword1"><span class="command"><span>}</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Termination.html#offset_2287..2297"><span>inv2_def</span></a><span> </span><a class="entity_ref" href="Termination.html#offset_2691..2697"><span>stale_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Termination.html#offset_2298..2302"><span>inv2</span></a><span> </span><span class="free"><span>c'</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Termination.html#offset_905..916"><span>daemon_step</span></a><span> </span><span class="free"><span>c</span></span><span> </span><span class="free"><span>c'</span></span><span> </span><span class="skolem"><span>p</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>p</span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
    </span><span class="keyword1"><span class="command"><span>{</span></span></span><span> </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>Q</span></span><span>
      </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Termination.html#offset_2188..2198"><span>consistent</span></a><span> </span><span class="free"><span>c'</span></span><span> </span><span class="skolem"><span>Q</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>stale</span></span><span> </span><span class="free"><span>c'</span></span><span> </span><span class="skolem"><span>Q</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∃</span></span><span> </span><span class="bound"><span>p</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><span class="skolem"><span>Q</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>∃</span></span><span> </span><span class="bound"><span>q</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.uminus_class.uminus|const"><span>-</span></a></span><span class="skolem"><span>Q</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>c'</span></span><span class="main"><span>⋅</span></span><span>r</span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>p</span></span><span> </span><span class="bound"><span>q</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater|const"><span>&gt;</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>c'</span></span><span class="main"><span>⋅</span></span><span>R</span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>p</span></span><span> </span><span class="bound"><span>q</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span> </span><span class="bound"><span>p</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>c</span></span><span class="main"><span>⋅</span></span><span>visited</span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>p</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.disj|const"><span>∨</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span> </span><span class="bound"><span>p</span></span><span> </span><span class="bound"><span>q</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>c</span></span><span class="main"><span>⋅</span></span><span>S</span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>p</span></span><span> </span><span class="bound"><span>q</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>c</span></span><span class="main"><span>⋅</span></span><span>R</span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>q</span></span><span> </span><span class="bound"><span>p</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
        </span><span class="comment1"><span>― ‹</span><span>Here we do a case analysis of the condition in the if branch of the daemon step.</span><span>›</span></span><span>
        </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="entity_def" id="offset_5697..5701">True</span><span>
        </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
          </span><span class="keyword1"><span class="command"><span>{</span></span></span><span> </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>p</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><span class="skolem"><span>Q</span></span><span>"</span></span></span><span> </span><span class="comment1"><span>― ‹</span><span>The daemon visits a process not in Q</span><span>›</span></span><span>
            </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∃</span></span><span> </span><span class="bound"><span>p</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><span class="skolem"><span>Q</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>∃</span></span><span> </span><span class="bound"><span>q</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.uminus_class.uminus|const"><span>-</span></a></span><span class="skolem"><span>Q</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>c</span></span><span class="main"><span>⋅</span></span><span>r</span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>p</span></span><span> </span><span class="bound"><span>q</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater|const"><span>&gt;</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>c</span></span><span class="main"><span>⋅</span></span><span>R</span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>p</span></span><span> </span><span class="bound"><span>q</span></span><span>"</span></span></span><span>
            </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
              </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="skolem"><span>p</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span class="skolem"><span>Q</span></span><span>›</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Termination.html#offset_2188..2198"><span>consistent</span></a><span> </span><span class="free"><span>c</span></span><span> </span><span class="skolem"><span>Q</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>stale</span></span><span> </span><span class="free"><span>c</span></span><span> </span><span class="skolem"><span>Q</span></span><span>"</span></span></span><span>
                </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Termination.html#offset_905..916"><span>daemon_step</span></a><span> </span><span class="free"><span>c</span></span><span> </span><span class="free"><span>c'</span></span><span> </span><span class="skolem"><span>p</span></span><span>›</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Termination.html#offset_2188..2198"><span>consistent</span></a><span> </span><span class="free"><span>c'</span></span><span> </span><span class="skolem"><span>Q</span></span><span>›</span></span></span><span>
                  </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="skolem"><span>stale</span></span><span> </span><span class="free"><span>c'</span></span><span> </span><span class="skolem"><span>Q</span></span><span>›</span></span></span><span>
                </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Termination.html#offset_894..904"><span>daemon_step_def</span></a><span> </span><a class="entity_ref" href="Termination.html#offset_2177..2187"><span>consistent_def</span></a><span> </span><a class="entity_ref" href="Termination.html#offset_2691..2697"><span>stale_def</span></a><span>
                </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.force|method"><span class="operator"><span>force</span></span></a><span> </span><span class="quasi_keyword"><span>split</span></span><span class="main"><span class="main"><span>:</span></span></span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.if_splits|fact"><span>if_splits</span></a><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>
              </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Termination.html#offset_2298..2302"><span>inv2</span></a><span> </span><span class="free"><span>c</span></span><span>›</span></span></span><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Termination.html#offset_2287..2297"><span>inv2_def</span></a><span> </span><a class="entity_ref" href="Termination.html#offset_2691..2697"><span>stale_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> 
            </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
            </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Termination.html#offset_905..916"><span>daemon_step</span></a><span> </span><span class="free"><span>c</span></span><span> </span><span class="free"><span>c'</span></span><span> </span><span class="skolem"><span>p</span></span><span>›</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="skolem"><span>p</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><span class="skolem"><span>Q</span></span><span>›</span></span></span><span>
              </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Termination.html#offset_894..904"><span>daemon_step_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>split</span></span><span class="main"><span class="main"><span>:</span></span></span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.if_splits|fact"><span>if_splits</span></a><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>}</span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>{</span></span></span><span> </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>p</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="skolem"><span>Q</span></span><span>"</span></span></span><span> </span><span class="comment1"><span>― ‹</span><span>The daemon visits a process in Q</span><span>›</span></span><span>
            </span><span class="keyword3"><span class="command"><span class="entity_def" id="offset_6492..6498">define</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>Q'</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>Q'</span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="skolem"><span>Q</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><span>{</span></span><span class="skolem"><span>p</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>First we show that </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span class="skolem"><span>Q'</span></span></span><span class="antiquote"><span>}</span></span></span><span> is consistent but stale.
</span><span>              So, by </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thm</span></span><span> </span><span class="quoted"><span>‹</span><a class="entity_ref" href="Termination.html#offset_2298..2302"><span>inv2</span></a><span> </span><span class="free"><span>c</span></span><span>›</span></span><span class="antiquote"><span>}</span></span></span><span>, the daemon missed a message from outside </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span class="skolem"><span>Q'</span></span></span><span class="antiquote"><span>}</span></span></span><span>.
</span><span>              Then it remains to show that this message did not come from </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span class="skolem"><span>p</span></span></span><span class="antiquote"><span>}</span></span></span><span>›</span></span></span><span>
            </span><span class="keyword3"><span class="command"><span class="entity_def" id="offset_6782..6788">obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>p'</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>q</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>p'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="skolem"><span>Q'</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>q</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.uminus_class.uminus|const"><span>-</span></a></span><span class="skolem"><span>Q'</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>c'</span></span><span class="main"><span>⋅</span></span><span>r</span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>p'</span></span><span> </span><span class="skolem"><span>q</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater|const"><span>&gt;</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>c'</span></span><span class="main"><span>⋅</span></span><span>R</span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>p'</span></span><span> </span><span class="skolem"><span>q</span></span><span>"</span></span></span><span>
            </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
              </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∃</span></span><span> </span><span class="bound"><span>p</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><span class="skolem"><span>Q'</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>∃</span></span><span> </span><span class="bound"><span>q</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.uminus_class.uminus|const"><span>-</span></a></span><span class="skolem"><span>Q'</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>c'</span></span><span class="main"><span>⋅</span></span><span>r</span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>p</span></span><span> </span><span class="bound"><span>q</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater|const"><span>&gt;</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>c'</span></span><span class="main"><span>⋅</span></span><span>R</span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>p</span></span><span> </span><span class="bound"><span>q</span></span><span>"</span></span></span><span>
              </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
                </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∃</span></span><span> </span><span class="bound"><span>p</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><span class="skolem"><span>Q'</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>∃</span></span><span> </span><span class="bound"><span>q</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.uminus_class.uminus|const"><span>-</span></a></span><span class="skolem"><span>Q'</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>c</span></span><span class="main"><span>⋅</span></span><span>r</span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>p</span></span><span> </span><span class="bound"><span>q</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater|const"><span>&gt;</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>c</span></span><span class="main"><span>⋅</span></span><span>R</span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>p</span></span><span> </span><span class="bound"><span>q</span></span><span>"</span></span></span><span>
                </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
                  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Termination.html#offset_2188..2198"><span>consistent</span></a><span> </span><span class="free"><span>c</span></span><span> </span><span class="skolem"><span>Q'</span></span><span>"</span></span></span><span>
                    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Termination.html#offset_905..916"><span>daemon_step</span></a><span> </span><span class="free"><span>c</span></span><span> </span><span class="free"><span>c'</span></span><span> </span><span class="skolem"><span>p</span></span><span>›</span></span></span><span> </span><a class="entity_ref" href="Termination.html#offset_5697..5701"><span>True</span></a><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Termination.html#offset_2188..2198"><span>consistent</span></a><span> </span><span class="free"><span>c'</span></span><span> </span><span class="skolem"><span>Q</span></span><span>›</span></span></span><span>
                    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Termination.html#offset_894..904"><span>daemon_step_def</span></a><span> </span><a class="entity_ref" href="Termination.html#offset_2177..2187"><span>consistent_def</span></a><span> </span><a class="entity_ref" href="Termination.html#offset_6492..6498"><span>Q'_def</span></a><span>
                    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/SMT/smt_systems.ML.html#SMT.smt|method"><span class="operator"><span>smt</span></span></a><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>
                  </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span>
                  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>stale</span></span><span> </span><span class="free"><span>c</span></span><span> </span><span class="skolem"><span>Q'</span></span><span>"</span></span></span><span>
                    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Termination.html#offset_905..916"><span>daemon_step</span></a><span> </span><span class="free"><span>c</span></span><span> </span><span class="free"><span>c'</span></span><span> </span><span class="skolem"><span>p</span></span><span>›</span></span></span><span> </span><a class="entity_ref" href="Termination.html#offset_5697..5701"><span>True</span></a><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="skolem"><span>stale</span></span><span> </span><span class="free"><span>c'</span></span><span> </span><span class="skolem"><span>Q</span></span><span>›</span></span></span><span>
                    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Termination.html#offset_894..904"><span>daemon_step_def</span></a><span> </span><a class="entity_ref" href="Termination.html#offset_6492..6498"><span>Q'_def</span></a><span> </span><a class="entity_ref" href="Termination.html#offset_2691..2697"><span>stale_def</span></a><span>
                    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>split</span></span><span class="main"><span class="main"><span>:</span></span></span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.if_splits|fact"><span>if_splits</span></a><span class="main"><span>)</span></span><span>
                  </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span>
                  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
                    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Termination.html#offset_2298..2302"><span>inv2</span></a><span> </span><span class="free"><span>c</span></span><span>›</span></span></span><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Termination.html#offset_2287..2297"><span>inv2_def</span></a><span> </span><a class="entity_ref" href="Termination.html#offset_2691..2697"><span>stale_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
                </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
                </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Termination.html#offset_905..916"><span>daemon_step</span></a><span> </span><span class="free"><span>c</span></span><span> </span><span class="free"><span>c'</span></span><span> </span><span class="skolem"><span>p</span></span><span>›</span></span></span><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Termination.html#offset_894..904"><span>daemon_step_def</span></a><span> </span><a class="entity_ref" href="Termination.html#offset_6492..6498"><span>Q'_def</span></a><span>
                  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>split</span></span><span class="main"><span class="main"><span>:</span></span></span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.if_splits|fact"><span>if_splits</span></a><span class="main"><span>)</span></span><span>
              </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
              </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Termination.html#offset_6782..6788"><span>that</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
            </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
            </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span>
            </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>q</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="skolem"><span>p</span></span><span>"</span></span></span><span>
              </span><span class="comment1"><span>― ‹</span><span>Then it remains to show that the message that the daemon missed did not come from </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span class="skolem"><span>p</span></span></span><span class="antiquote"><span>}</span></span></span><span>.</span><span>›</span></span><span>
            </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
              </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>c'</span></span><span class="main"><span>⋅</span></span><span>R</span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>p'</span></span><span> </span><span class="skolem"><span>p</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>c'</span></span><span class="main"><span>⋅</span></span><span>s</span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>p</span></span><span> </span><span class="skolem"><span>p'</span></span><span>"</span></span></span><span>
              </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
                </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>c'</span></span><span class="main"><span>⋅</span></span><span>r</span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>p</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>c'</span></span><span class="main"><span>⋅</span></span><span>R</span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>p</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>c'</span></span><span class="main"><span>⋅</span></span><span>s</span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>p</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>c'</span></span><span class="main"><span>⋅</span></span><span>S</span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>p</span></span><span>"</span></span></span><span>
                  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Termination.html#offset_905..916"><span>daemon_step</span></a><span> </span><span class="free"><span>c</span></span><span> </span><span class="free"><span>c'</span></span><span> </span><span class="skolem"><span>p</span></span><span>›</span></span></span><span> </span><a class="entity_ref" href="Termination.html#offset_5697..5701"><span>True</span></a><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Termination.html#offset_894..904"><span>daemon_step_def</span></a><span>
                  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
                </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span>
                </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>c'</span></span><span class="main"><span>⋅</span></span><span>R</span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>p'</span></span><span> </span><span class="skolem"><span>p</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>c'</span></span><span class="main"><span>⋅</span></span><span>S</span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>p</span></span><span> </span><span class="skolem"><span>p'</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Termination.html#offset_2188..2198"><span>consistent</span></a><span> </span><span class="free"><span>c'</span></span><span> </span><span class="skolem"><span>Q</span></span><span>›</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="skolem"><span>p</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="skolem"><span>Q</span></span><span>›</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="skolem"><span>p'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="skolem"><span>Q'</span></span><span>›</span></span></span><span>
                  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Termination.html#offset_2177..2187"><span>consistent_def</span></a><span> </span><a class="entity_ref" href="Termination.html#offset_6492..6498"><span>Q'_def</span></a><span>
                  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
                </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
              </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
              </span><span class="keyword1"><span class="command"><span>{</span></span></span><span> </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>p</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="skolem"><span>q</span></span><span>"</span></span></span><span>
                </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>c'</span></span><span class="main"><span>⋅</span></span><span>r</span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>p'</span></span><span> </span><span class="skolem"><span>p</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater|const"><span>&gt;</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>c'</span></span><span class="main"><span>⋅</span></span><span>R</span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>p'</span></span><span> </span><span class="skolem"><span>p</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>(</span></span><span class="free"><span>c'</span></span><span class="main"><span>⋅</span></span><span>r</span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>p'</span></span><span> </span><span class="skolem"><span>q</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater|const"><span>&gt;</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>c'</span></span><span class="main"><span>⋅</span></span><span>R</span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>p'</span></span><span> </span><span class="skolem"><span>q</span></span><span>›</span></span></span><span> 
                  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
                </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>c'</span></span><span class="main"><span>⋅</span></span><span>r</span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>p'</span></span><span> </span><span class="skolem"><span>p</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater|const"><span>&gt;</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>c'</span></span><span class="main"><span>⋅</span></span><span>s</span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>p</span></span><span> </span><span class="skolem"><span>p'</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>(</span></span><span class="free"><span>c'</span></span><span class="main"><span>⋅</span></span><span>R</span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>p'</span></span><span> </span><span class="skolem"><span>p</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>c'</span></span><span class="main"><span>⋅</span></span><span>s</span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>p</span></span><span> </span><span class="skolem"><span>p'</span></span><span>›</span></span></span><span>
                  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
                </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.False|const"><span>False</span></a></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Termination.html#offset_1493..1497"><span>inv1</span></a><span> </span><span class="free"><span>c'</span></span><span>›</span></span></span><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Termination.html#offset_1482..1492"><span>inv1_def</span></a><span>
                  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.order_class.leD|fact"><span>leD</span></a><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>}</span></span></span><span>
              </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
            </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
            </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span>
            </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Termination.html#offset_6492..6498"><span>Q'_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span> 
            </span><span class="keyword1"><span class="command"><span>}</span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
        </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
        </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>False</span><span>
          </span><span class="comment1"><span>― ‹</span><span>Case in which the daemon declares termination; trivial because </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> </span><span class="quoted"><span>"</span><span class="free"><span>c</span></span><span class="main"><span>⋅</span></span><span>terminated"</span></span><span class="antiquote"><span>}</span></span></span><span> is the only thing that changes</span><span>›</span></span><span>
        </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Termination.html#offset_905..916"><span>daemon_step</span></a><span> </span><span class="free"><span>c</span></span><span> </span><span class="free"><span>c'</span></span><span> </span><span class="skolem"><span>p</span></span><span>›</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Termination.html#offset_2188..2198"><span>consistent</span></a><span> </span><span class="free"><span>c'</span></span><span> </span><span class="skolem"><span>Q</span></span><span>›</span></span></span><span>
            </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="skolem"><span>stale</span></span><span> </span><span class="free"><span>c'</span></span><span> </span><span class="skolem"><span>Q</span></span><span>›</span></span></span><span>
            </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Termination.html#offset_2298..2302"><span>inv2</span></a><span> </span><span class="free"><span>c</span></span><span>›</span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Termination.html#offset_894..904"><span>daemon_step_def</span></a><span> </span><a class="entity_ref" href="Termination.html#offset_2177..2187"><span>consistent_def</span></a><span> </span><a class="entity_ref" href="Termination.html#offset_2287..2297"><span>inv2_def</span></a><span> </span><a class="entity_ref" href="Termination.html#offset_2691..2697"><span>stale_def</span></a><span>
          </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
      </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><span class="keyword1"><span class="command"><span>}</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Termination.html#offset_2287..2297"><span>inv2_def</span></a><span> </span><a class="entity_ref" href="Termination.html#offset_2691..2697"><span>stale_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span> 
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Termination.html#offset_2584..2589"><span>assms</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Termination.html#offset_1200..1210"><span>step_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Termination.vars.inv3_def|fact"><span class="entity_def" id="Termination.vars.inv3_def|thm"><span class="entity_def" id="Termination.vars.inv3_def_raw|axiom"><span class="entity_def" id="offset_9648..9658">definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Termination.vars.inv3.cong|fact"><span class="entity_def" id="Termination.vars.inv3.cong|thm"><span class="entity_def" id="Termination.vars.inv3|const"><span class="entity_def" id="offset_9659..9663">inv3</span></span></span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>inv3</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>c</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>c</span></span></span></span><span class="main"><span>⋅</span></span><span>terminated </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>⟶</span></a></span><span> </span><a class="entity_ref" href="Termination.html#offset_2188..2198"><span>consistent</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>c</span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UNIV|const"><span>UNIV</span></a><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_9717..9722">lemma</span></span></span><span> </span><span class="entity_def" id="Termination.vars.inv3_init|fact"><span class="entity_def" id="Termination.vars.inv3_init|thm"><span>inv3_init</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Termination.html#offset_1297..1301"><span>init</span></a><span> </span><span class="free"><span>c</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Termination.html#offset_9659..9663"><span>inv3</span></a><span> </span><span class="free"><span>c</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Termination.html#offset_9717..9722"><span>assms</span></a><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Termination.html#offset_1286..1296"><span>init_def</span></a><span> </span><a class="entity_ref" href="Termination.html#offset_9648..9658"><span>inv3_def</span></a><span> 
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_9826..9831">lemma</span></span></span><span> </span><span class="entity_def" id="Termination.vars.inv3_step|fact"><span class="entity_def" id="Termination.vars.inv3_step|thm"><span>inv3_step</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Termination.html#offset_1211..1215"><span>step</span></a><span> </span><span class="free"><span>c</span></span><span> </span><span class="free"><span>c'</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Termination.html#offset_9659..9663"><span>inv3</span></a><span> </span><span class="free"><span>c</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Termination.html#offset_9659..9663"><span>inv3</span></a><span> </span><span class="free"><span>c'</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Termination.html#offset_9826..9831"><span>assms</span></a><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Termination.html#offset_1200..1210"><span>step_def</span></a><span> </span><a class="entity_ref" href="Termination.html#offset_894..904"><span>daemon_step_def</span></a><span> </span><a class="entity_ref" href="Termination.html#offset_418..428"><span>receive_step_def</span></a><span> </span><a class="entity_ref" href="Termination.html#offset_9648..9658"><span>inv3_def</span></a><span> </span><a class="entity_ref" href="Termination.html#offset_2177..2187"><span>consistent_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.force|method"><span class="operator"><span>force</span></span></a><span> </span><span class="quasi_keyword"><span>split</span></span><span class="main"><span class="main"><span>:</span></span></span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.if_splits|fact"><span>if_splits</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Termination.vars.safety_def|fact"><span class="entity_def" id="Termination.vars.safety_def|thm"><span class="entity_def" id="Termination.vars.safety_def_raw|axiom"><span class="entity_def" id="offset_10018..10028">definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Termination.vars.safety.cong|fact"><span class="entity_def" id="Termination.vars.safety.cong|thm"><span class="entity_def" id="Termination.vars.safety|const"><span class="entity_def" id="offset_10029..10035">safety</span></span></span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>safety</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>c</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>c</span></span></span></span><span class="main"><span>⋅</span></span><span>terminated </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>⟶</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>∀</span></a></span><span> </span><span class="bound"><span>p</span></span><span> </span><span class="bound"><span>q</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="Termination.html#offset_310..317"><span>pending</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>c</span></span></span></span><span> </span><span class="bound"><span>p</span></span><span> </span><span class="bound"><span>q</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_10101..10106">lemma</span></span></span><span> </span><span class="entity_def" id="Termination.vars.safe|fact"><span class="entity_def" id="Termination.vars.safe|thm"><span>safe</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Termination.html#offset_2298..2302"><span>inv2</span></a><span> </span><span class="free"><span>c</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Termination.html#offset_9659..9663"><span>inv3</span></a><span> </span><span class="free"><span>c</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Termination.html#offset_10029..10035"><span>safety</span></a><span> </span><span class="free"><span>c</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Termination.html#offset_10101..10106"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Termination.html#offset_2287..2297"><span>inv2_def</span></a><span> </span><a class="entity_ref" href="Termination.html#offset_10018..10028"><span>safety_def</span></a><span> </span><a class="entity_ref" href="Termination.html#offset_299..309"><span>pending_def</span></a><span> </span><a class="entity_ref" href="Termination.html#offset_9648..9658"><span>inv3_def</span></a><span> </span><a class="entity_ref" href="Termination.html#offset_2177..2187"><span>consistent_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.ComplD|fact"><span>ComplD</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Record.html#Record.iso_tuple_UNIV_I|fact"><span>iso_tuple_UNIV_I</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.le_refl|fact"><span>le_refl</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span></pre>
</body>

</html>